<!DOCTYPE html>
<html>
<head>
  <title>車掌用コンテンツアプリ</title>
  <style>
    html{
        background-color: black;
    }

    .square-container {
      display: flex;
      margin-top: 10px;
    }

    .square {
      width: 25px;
      height: 25px;
      background-color: gray;
      color: black;
      margin: 5px;
    }
    .square.green {
      background-color: green;
      color: white;
    }
    .square.red {
      background-color: red;
      color: white;
    }

    /* ロード画面のスタイル */
    #loader {
      display: flex;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #f1f1f1;
      z-index: 9999;
    }
    
    /* ローディングアイコンのスタイル */
    .loader-icon {
      display: inline-block;
      width: 50px;
      height: 50px;
      border: 5px solid #333;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s ease-in-out infinite;
    }
    
    /* ローディングアイコンのアニメーション */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* パスワード入力フォームと非表示コンテンツのスタイル */
    #password-form,
    #hidden-content {
      display: none;
    }
    
    #password-form {
      text-align: center;
      margin-top: 100px;
    }
    
    #password-input,
    #submit-button {
      margin-top: 10px;
    }

    .right{
        display: flex;
    }

    #container{
        text-align: center;
    }

    .left{
        display: flex;
    }

    #container2{
        text-align: center;
    }
  </style>
</head>
<body>
  <!-- ロード画面 -->
  <div id="loader">
    <div class="loader-icon"></div>
    <img src="./IR全日本鉄道透過版(ロゴ).png">
  </div>

  <!-- パスワード入力フォーム -->
  <div id="password-form">
    <h2 style="color: white;">列車番号を入力してください</h2>
    <input type="password" id="passwordInput" oninput="updateKind()">
    <br>
    <button id="submit-button" onclick="submitForm()">送信</button>
  </div>

  <!-- 非表示のコンテンツ -->
  <div id="hidden-content">
    <div style="width: 100%; display: flex; background-color: blue;">
      <div style="padding-right: 30px; height: 30px;　border: solid 3px; color: white;">
      <a href="#" style="color: white;">運行管理</a>
      </div>
      <div style="padding-right: 30px; height: 30px;　border: solid 3px; color: white;">
      <a href="#" style="color: white;">車両管理</a>
      </div>
      <div style="padding-right: 30px; height: 30px;　border: solid 3px; color: white;">
      <a href="#" style="color: white;">運行安全システム</a>
      </div>
      <div style="height: 30px;　border: solid 3px; color: white;">
      <a href="#" style="color: white;">緊急システム</a>
      </div>
    </div>
    <div id="peages" style="flex: 1;">
    <div style="width: 75%;" id="peage1">
    <button id="button1" style="width: 40px; height: 40px; background-color: gray; ">両数</button>
    <button id="button2" onclick="playAudio('audio1')" style="width: 40px; height: 40px; background-color: greenyellow;">右開</button>
    <button id="button3" onclick="playAudio('audio2')" style="width: 40px; height: 40px; background-color: red;">右閉</button>
    <button id="button4" onclick="playAudio('audio3')" style="width: 40px; height: 40px; background-color: greenyellow;">左開</button>
    <button id="button5" onclick="playAudio('audio4')" style="width: 40px; height: 40px; background-color: red;">左閉</button>
    <p class="kind" id="kindOutput"></p>
    <button id="longPressButton">ボタンを長押しして音を再生</button>
      <p id="StimeOutput"></p>
      <p id="SDtimeOutput"></p>
      <p id="TDtimeOutput"></p>
      <p id="FDtimeOutput"></p>
      <p id="FIDtimeOutput"></p>
      <p id="SIDtimeOutput"></p>
      <p id="SEDtimeOutput"></p>
      <p id="EDtimeOutput"></p>
      <p id="NDtimeOutput"></p>
      <p id="TEDtimeOutput"></p>
      <p id="ELDtimeOutput"></p>
      <p id="TWDtimeOutput"></p>
      <p id="TtDtimeOutput"></p>
      <p id="FItDtimeOutput"></p>
    </div>
  
  <script>
    var audio = new Audio('sound.mp3'); // 再生したい音声ファイルのパスを指定してください

    var longPressButton = document.getElementById('longPressButton');
    var timeoutId;

    longPressButton.addEventListener('mousedown', function() {
      timeoutId = setTimeout(function() {
        audio.play();
      }, 500); // 500ミリ秒の長押し時間を指定しています
    });

    longPressButton.addEventListener('mouseup', function() {
      clearTimeout(timeoutId);
      audio.pause();
      audio.currentTime = 0; // 音声を最初の位置に戻します
    });

    longPressButton.addEventListener('mouseleave', function() {
      clearTimeout(timeoutId);
      audio.pause();
      audio.currentTime = 0;
    });
  </script>
    <p class="kind" id="kindOutput"></p>
    <div class="right">
      <p style="color: white;">右</p>
      <div id="container"></div>
    </div>
    <div class="left">
      <p style="color: white;">左</p>
      <div id="container2"></div>
    </div>
  <audio id="audio1" src="ドアチャイム.mp3"></audio>
  <audio id="audio2" src="ドアチャイム.mp3"></audio>
  <audio id="audio3" src="ドアチャイム.mp3"></audio>
  <audio id="audio4" src="ドアチャイム.mp3"></audio><table id="timeTable">
    <tr>
      <td>1行目の時間:</td>
      <td id="row1Time"></td>
    </tr>
    <tr>
      <td>2行目の時間:</td>
      <td id="row2Time"></td>
    </tr>
  </table>
  
  <script>
    function updateKind() {
      const passwordInput = document.getElementById('passwordInput');
      const passwordValue = passwordInput.value;

      if (passwordValue.length >= 8) {
        const hour = passwordValue.substr(4, 2);
        const minute = passwordValue.substr(6, 2);

        // 1行目に時刻を表示
        const row1TimeCell = document.getElementById('row1Time');
        row1TimeCell.textContent = hour + ':' + minute;

        // 時間に3分足した時刻を計算
        const addedMinutes = parseInt(minute) + 3;
        const addedHour = parseInt(hour) + Math.floor(addedMinutes / 60);
        const adjustedMinute = addedMinutes % 60;

        // 2行目に足した時刻を表示
        const row2TimeCell = document.getElementById('row2Time');
        row2TimeCell.textContent = (addedHour < 10 ? '0' : '') + addedHour + ':' + (adjustedMinute < 10 ? '0' : '') + adjustedMinute;
      } else {
        const row1TimeCell = document.getElementById('row1Time');
        row1TimeCell.textContent = '';

        const row2TimeCell = document.getElementById('row2Time');
        row2TimeCell.textContent = '';
      }
    }
  </script>
  <script>
    var button1 = document.getElementById('button1');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button2');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button3');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button4');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var button1 = document.getElementById('button5');
    var audio = new Audio('button audio.mp3');

    button1.addEventListener('click', function() {
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    });
  </script>
  <script>
    var audio1 = document.getElementById('audio1');
    var audio2 = document.getElementById('audio2');
    var audio3 = document.getElementById('audio3');
    var audio4 = document.getElementById('audio4');

    function playAudio(id) {
      var currentAudio = getCurrentAudio();

      if (currentAudio === null) {
        // 再生中の音声がない場合、指定された音声を再生
        startAudio(id);
      } else if (id === currentAudio.id) {
        // 再生中の音声と同じボタンが押された場合、再生を停止
        stopAudio(currentAudio);
      } else {

      }if (id === 'audio1' || id === 'audio4') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio2' || id === 'audio3') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio2' || id === 'audio4') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio3' || id === 'audio1') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio3' || id === 'audio2') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio4' || id === 'audio1') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio4' || id === 'audio2') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio1' || id === 'audio3') {
          // button3とbutton4の場合、重ねて再生
          startAudio(id);
      }else if (id === 'audio1' || id === 'audio2') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }else if (id === 'audio2' || id === 'audio1') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }else if (id === 'audio3' || id === 'audio4') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }else if (id === 'audio4' || id === 'audio3') {
          // button1とbutton2の場合、再生中の音声を停止して指定された音声を再生
          stopAudio(currentAudio);
          startAudio(id);
      }
    } 
 

    function getCurrentAudio() {
      // 再生中の音声を返す
      if (!audio1.paused) return { id: 'audio2', audio: audio1 };
      if (!audio2.paused) return { id: 'audio1', audio: audio2 };
      if (!audio3.paused) return { id: 'audio4', audio: audio3 };
      if (!audio4.paused) return { id: 'audio3', audio: audio4 };
      return null;
    }

    function startAudio(id) {
      var audio = document.getElementById(id);
      audio.currentTime = 0; // 再生位置をリセット
      audio.play();
    }

    function stopAudio(currentAudio) {
      currentAudio.audio.pause();
    }
  </script>
  <script>
    var container = document.getElementById('container');
    var container2 = document.getElementById('container2');
    var button1 = document.getElementById('button1');
    var button2 = document.getElementById('button2');
    var button3 = document.getElementById('button3');
    var button4 = document.getElementById('button4');
    var button5 = document.getElementById('button5');
    var squares = [];
    var squares2 = [];
    var delay = 12;
    var delay2 = 3300;

    button1.addEventListener('click', createSquares);
    button2.addEventListener('click', resetColor);
    button3.addEventListener('click', changeColor);
    button4.addEventListener('click', resetColor2);
    button5.addEventListener('click', changeColor2);

    function createSquares() {
      var numSquares = parseInt(prompt('両数を入力してください'));
      function createSquares() {
  // ...

  // ボタン2を有効化
  button2.disabled = false;

  // すべての□を緑色に変更する
  changeColor();
}

      clearContainer2();

      var squareContainer = document.createElement('div');
      squareContainer.className = 'square-container';

      var squareContainer2 = document.createElement('div');
      squareContainer2.className = 'square-container';

      for (var i = 0; i < numSquares; i++) {
        var square = document.createElement('div');
        square.className = 'square';
        squares.push(square);
        squareContainer.appendChild(square);
        var carnumber = i;
        square.textContent = carnumber + 1;
      }

      for (var j = 0; j < numSquares; j++) {
        var square2 = document.createElement('div');
        square2.className = 'square';
        squares2.push(square2);
        squareContainer2.appendChild(square2);
        var carnumber2 = j;
        square2.textContent = carnumber2 + 1;
      }

      container.appendChild(squareContainer);
      container2.appendChild(squareContainer2);

      // ボタン2を有効化
      button2.disabled = false;
    }

    function changeColor() {
    var isAllGreen = squares.every(function(square) {
      return square.classList.contains('green');
    });

    squares.forEach(function(square, index) {
      setTimeout(function() {
        square.classList.remove('red');
        square.classList.add('green');

        if (Math.random() < 0.02) {
          square.classList.remove('green');
          square.classList.add('red');
        }
      }, delay2 + delay * index);
    });

    // ボタン2を無効化
    button3.disabled = true;

    // ボタン3を有効化
    button2.disabled = false;
  }


    function resetColor() {
      squares.forEach(function(square) {
        square.classList.remove('green');
        square.classList.remove('red');
        square.classList.add('gray');
      });

      // ボタン3を無効化
      button2.disabled = true;

      // ボタン2を有効化
      button3.disabled = false;
    }

    function changeColor2() {
  squares2.forEach(function(square,index){
    setTimeout(function() {
    square.classList.remove('red');
    square.classList.add('green');
    if (Math.random() < 0.02) {
        square.classList.remove('green');
        square.classList.add('red');
      }
    },delay2 + delay * index)
  });
  // ボタン2を無効化
  button5.disabled = true;

// ボタン3を有効化
button4.disabled = false;
}

    function resetColor2() {
      squares2.forEach(function(square) {
        square.classList.remove('green');
        square.classList.remove('red');
        square.classList.add('gray');
      });
      // ボタン3を無効化
      button4.disabled = true;

      // ボタン2を有効化
      button5.disabled = false;
    }


    function clearContainer() {
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }
    }

    function clearContainer2() {
      while (container2.firstChild) {
        container2.removeChild(container2.firstChild);
      }
    }
  </script>

  <script>
    // ページのロードが完了したら非表示のコンテンツを表示する
    window.addEventListener('load', function() {
      setTimeout(function() {
        document.getElementById('loader').style.display = 'none';
        document.getElementById('password-form').style.display = 'block';
      }, 10000); // 10秒後にパスワード入力フォームを表示する
    });

    
    function updateKind() {
  var passwordInput = document.getElementById('passwordInput');
  var kindOutput = document.getElementById('kindOutput');
  var StimeOutput = document.getElementById('StimeOutput');
  var UDOutput = document.getElementById('UDOutput');
      
  var SDtimeOutput = document.getElementById('SDtimeOutput');
  var TDtimeOutput = document.getElementById('TDtimeOutput');
  var FDtimeOutput = document.getElementById('FDtimeOutput');
  var FIDtimeOutput = document.getElementById('FIDtimeOutput');
  var SIDtimeOutput = document.getElementById('SIDtimeOutput');
  var SEDtimeOutput = document.getElementById('SEDtimeOutput');
  var EDtimeOutput = document.getElementById('EDtimeOutput');
  var NDtimeOutput = document.getElementById('NDtimeOutput');
  var TEDtimeOutput = document.getElementById('TEDtimeOutput');
  var ELDtimeOutput = document.getElementById('ELDtimeOutput');
  var TWDtimeOutput = document.getElementById('TWDtimeOutput');
  var TtDtimeOutput = document.getElementById('TtDtimeOutput');
  var FItDtimeOutput = document.getElementById('FItDtimeOutput');

  var FstChar = passwordInput.value.charAt(0).toLowerCase();
  var SndChar = passwordInput.value.charAt(1).toLowerCase();
  var TrdChar = passwordInput.value.charAt(2).toLowerCase();
  var fourChar = passwordInput.value.charAt(3).toLowerCase();
  var fifChar = passwordInput.value.charAt(4).toLowerCase();
  var sixChar = passwordInput.value.charAt(4).toLowerCase();
  var sevChar = passwordInput.value.charAt(5).toLowerCase();
  var eigChar = passwordInput.value.charAt(6).toLowerCase();
  var ninChar = passwordInput.value.charAt(9).toLowerCase();
  var tenChar = passwordInput.value.charAt(10).toLowerCase();
  var kindText = '';
  var ShourText = '';
  var SminText = '';
  var UDText = '';
  var FSChar = fifChar + sixChar;
  var SEChar = sevChar + eigChar;
  var NTChar = ninChar + tenChar;

  if (SndChar === '0') {
    if (TrdChar === '1') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '6') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '7') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '8') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '9') {
    ShourText = Sndchar + TrdChar ;
    }else {
      alert('列車番号に誤りがあります。')
    }
  } else if (SndChar === '1') {
    if (TrdChar === '0') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '1') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '2') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '3') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '4') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '5') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '6') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '7') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '8') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '9') {
    ShourText = Sndchar + TrdChar ;
    }else {
      alert('列車番号に誤りがあります。')
    }
  } else if (SndChar === '2') {
    if (TrdChar === '0') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '1') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '2') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '3') {
    ShourText = Sndchar + TrdChar ;
    }else if (TrdChar === '4') {
    ShourText = Sndchar + TrdChar ;
    }else {
      alert('列車番号に誤りがあります。')
    }
  }else {
      alert('列車番号に誤りがあります。')
    }
if (FSChar === '01' || FSChar === '03' || FSChar === '05' || FSChar === '07' || FSChar === '09' || FSChar === '11') {
  UDText = '下り'
  if (FSChar === '01') {
    SminText = Math.ceil(00 + SEChar * 3.8)
  }else if (FSChar === '03') {
    SminText = Math.ceil(10 + SEChar * 3.8)
  }else if (FSChar === '05') {
    SminText = Math.ceil(20 + SEChar * 3.8)
  }else if (FSChar === '07') {
    SminText = Math.ceil(30 + SEChar * 3.8)
  }else if (FSChar === '09') {
    SminText = Math.ceil(40 + SEChar * 3.8)
  }else if (FSChar === '11') {
    SminText = Math.ceil(50 + SEChar * 3.8)
  }
}else if (FSChar === '02' || FSChar === '04' || FSChar === '06' || FSChar === '08' || FSChar === '10' || FSChar === '12') {
  UDText = '上り'
  if (FSChar === '02') {
    SminText = Math.ceil(05 + SEChar * 3.8)
  }else if (FSChar === '04') {
    SminText = Math.ceil(15 + SEChar * 3.8)
  }else if (FSChar === '06') {
    SminText = Math.ceil(25 + SEChar * 3.8)
  }else if (FSChar === '08') {
    SminText = Math.ceil(35 + SEChar * 3.8)
  }else if (FSChar === '10') {
    SminText = Math.ceil(45 + SEChar * 3.8)
  }else if (FSChar === '12') {
    SminText = Math.ceil(55 + SEChar * 3.8)
  }
}
      if (UDText === '下り') {
        if (NTChar === '01') {
          //やもかいり
      SDtime.setMinutes(Smin.getMinutes() + 6);
        }if (NTChar <= '02' && !FstChar === 'S') {
          //海島
      TDtime.setMinutes(SDtime.getMinutes() + 5);
        }if (NTChar <= '03' && !FstChar === 'S' && !FstChar === 'T') {
          //海の山新都心
      FDtime.setMinutes(TDtime.getMinutes() + 8);
        }if (NTChar <= '04' && !FstChar === 'S' && !FstChar === 'T') {
          //神代
      FIDtime.setMinutes(FDtime.getMinutes() + 7);
        }if (NTChar <= '05' && FstChar === 'L') {
          //旧海
      SIDtime.setMinutes(FIDtime.getMinutes() + 10);
        }if (NTChar <= '06' && FstChar === 'L') {
          //新海
      SEDtime.setMinutes(SIDtime.getMinutes() + 9);
        }if (NTChar <= '07' && FstChar === 'L') {
          //海道
      EDtime.setMinutes(SEDtime.getMinutes() + 8);
        }if (NTChar <= '08') {
          //船港
      NDtime.setMinutes(EDtime.getMinutes() + 12);
        }if (NTChar <= '09' && !FstChar === 'S' && !FstChar ==='T') {
          //先十
      TEDtime.setMinutes(NDtime.getMinutes() + 9);
        }if (NTChar <= '10' && !FstChar === 'T') {
          //鳥の島
      ELDtime.setMinutes(TEDtime.getMinutes() + 5);
        }if (NTChar <= '11' && FstChar === 'L') {
          //北鳥
      TWDtime.setMinutes(ELDtime.getMinutes() + 7);
        }if (NTChar <= '12' && !FstChar === 'S') {
          //上新庄
      TtDtime.setMinutes(TWDtime.getMinutes() + 11);
        }if (NTChar <= '13') {
          //海洋
      FtDtime.setMinutes(TtDtime.getMinutes() + 11);
        }if (NTChar <= '14') {
          //宮吉
      FItDtime.setMinutes(FtDtime.getMinutes() + 9);
        }
      }
  SDtime.setMinutes(Smin.getMinutes() + 3); // +3分

      
  kindOutput.textContent = kindText;
  UDOutput.textContent = UDText;
  StimeOutput.textContent = ShourText + ':' + SminText;
      
  SDtimeOutput.textContent = ShourText + ':' + SDtime;
  TDtimeOutput.textContent = ShourText + ':' + TDtime;
  FDtimeOutput.textContent = ShourText + ':' + FDtime;
  FIDtimeOutput.textContent = ShourText + ':' + FIDtime;
  SIDtimeOutput.textContent = ShourText + ':' + SIDtime;
  SEDtimeOutput.textContent = ShourText + ':' + SEDtime;
  EDtimeOutput.textContent = ShourText + ':' + EDtime;
  NDtimeOutput.textContent = ShourText + ':' + NDtime;
  TEDtimeOutput.textContent = ShourText + ':' + TEDtime;
  ELDtimeOutput.textContent = ShourText + ':' + ELDtime;
  TWDtimeOutput.textContent = ShourText + ':' + TWDtime;
  TtDtimeOutput.textContent = ShourText + ':' + TtDtime;
  FItDtimeOutput.textContent = ShourText + ':' + FItDtime;
      
}
    

function submitForm() {
  var passwordInput = document.getElementById('passwordInput');
  var firstChar = passwordInput.value.charAt(0);

  // フォーム送信などの処理を行う
  // ここではアラートを表示してみます
  alert('送信ボタンが押されました。1文字目: ' + firstChar);
  
      var hiddenContent = document.getElementById('hidden-content');

        document.getElementById('password-form').style.display = 'none';
        hiddenContent.style.display = 'block';
}

  </script>
  </div>
  </div>
</body>
</html>
